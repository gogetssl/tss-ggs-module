<?php

namespace ModulesGarden\TTSGGSModule\Packages\Samples\UI\Admin\DataTable\Forms;

use ModulesGarden\TTSGGSModule\Components\Dropdown\Dropdown;
use ModulesGarden\TTSGGSModule\Components\Form\AbstractFormOneColumn;
use ModulesGarden\TTSGGSModule\Components\FormGroup\FormGroupHalfWidth;
use ModulesGarden\TTSGGSModule\Components\FormInputEmail\FormInputEmail;
use ModulesGarden\TTSGGSModule\Components\FormInputText\FormInputText;
use ModulesGarden\TTSGGSModule\Core\Components\Actions\Reload;
use ModulesGarden\TTSGGSModule\Core\Contracts\Components\AdminAreaInterface;
use ModulesGarden\TTSGGSModule\Core\Contracts\Components\AjaxComponentInterface;
use ModulesGarden\TTSGGSModule\Packages\Samples\UI\Admin\DataTable\Providers\UserProvider;

class UserCreate extends AbstractFormOneColumn implements AdminAreaInterface, AjaxComponentInterface
{
    protected string $provider = UserProvider::class;
    protected string $providerAction = 'create';

    public function loadHtml(): void
    {
        $this->builder->createField(FormInputText::class, 'firstname')
            ->required();
        $this->builder->createField(FormInputText::class, 'lastname')
            ->required();
        $this->builder->createField(FormInputText::class, 'address1')
            ->required();
        $this->builder->createField(FormInputText::class, 'city', false, new FormGroupHalfWidth())
            ->required();
        $this->builder->createField(FormInputText::class, 'state', false, new FormGroupHalfWidth())
            ->required();
        $this->builder->createField(FormInputEmail::class, 'email')
            ->required()
            ->email();

        $dropdown = new Dropdown();
        $dropdown->setOptions([
            'jeden' => 'xxx',
            'dwa'   => 'xxeedf'
        ]);
        $dropdown->setDefaultValueAsFirstOption();
        $dropdown->onChange(new Reload($this));
        $this->builder->addField($dropdown);
    }

    public function reload()
    {
        parent::reload(); // TODO: Change the autogenerated stub

        $this->builder->createField(FormInputText::class, uniqid('awdawdawdawd'))
            ->required();
    }
}
